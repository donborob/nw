<% if current_user.likes.find_by_post_id(@post.id) %>
    <%= form_for like, :html => { :method => :delete },
                 :remote => true do |f| %>
        <%= f.submit "Unlike" %>
    <% end %>
<% else %>
    <% @like = current_user.likes.new %>
    <%= form_for @like, :url => {:controller => :likes, action: :create} ,:remote => true, :html => { :method => :post } do |f| %>
        <%= f.hidden_field :post_id, value: @post.id %>
        <%= f.hidden_field :user_id, value: current_user.id %>
        <%= f.submit "Like" %>
    <% end %>
<% end %>